{
  "type": "object",
  "title": "Configuration",
  "required": [
    "user",
    "#password",
    "endpoint",
    "datasources",
    "poll_mode",
    "site_id"
  ],
  "properties": {
    "user": {
      "type": "string",
      "title": "Tableau user name",
      "propertyOrder": 100
    },
    "#password": {
      "type": "string",
      "title": "Tableau user password",
      "format": "password",
      "propertyOrder": 200
    },
    "endpoint": {
      "type": "string",
      "title": "Tableau server API endpoint",
      "propertyOrder": 250
    },
    "site_id": {
      "type": "string",
      "title": "Tableau Site ID. Use with online version",
      "propertyOrder": 255
    },
    "poll_mode": {
      "type": "number",
      "title": "Poll mode",
      "description": "If set to `Yes` the trigger will wait for all triggered jobs to finish, otherwise it will trigger all the jobs and finish successfully right after.",
      "propertyOrder": 455,
      "enum": [
        0,
        1
      ],
      "default": 0,
      "options": {
        "enum_titles": [
          "No",
          "Yes"
        ]
      }
    },
    "datasources": {
      "type": "array",
      "title": "Tableau datasources",
      "description": "List of datasources with extracts to trigger. Note that there must be appropriate tasks/schedules set for all these sources otherwise the execution will fail",
      "items": {
        "format": "grid",
        "type": "object",
        "title": "Extract",
        "required": [
          "name",
          "tag",
          "luid",
          "type"
        ],
        "properties": {
          "name": {
            "type": "string",
            "title": "Data source name.",
            "description": "<b>Required</b> Data source name as found in Tableau.",
            "propertyOrder": 1000
          },
          "tag": {
            "type": "string",
            "title": "Data source tag.",
            "description": "Optional data source tag as found in Tableau.",
            "propertyOrder": 2000
          },
          "luid": {
            "type": "string",
            "title": "Tableu server unique LUID of the datasource (as represented via API)",
            "description": "Optional unique datasource identifier i.e. xx12-3324-1323, available via API. This ensures unique identification of the datasource. If specified, the 'tag' parameter is ignored.",
            "propertyOrder": 3000
          },
          "type": {
            "enum": [
              "RefreshExtractTask",
              "IncrementExtractTask"
            ],
            "options": {
              "enum_titles": [
                "Full",
                "Incremental"
              ]
            },
            "type": "string",
            "title": "Refresh type",
            "description": "Extract refresh type",
            "default": "Full",
            "propertyOrder": 4000
          }
        }
      }
    }
  }
}
