{
  "type": "object",
  "title": "Configuration",
  "required": [
    "endpoint",
    "datasources",
    "poll_mode",
    "site_id",
    "authentication_type"
  ],
  "properties": {
    "api_version": {
      "type": "string",
      "title": "REST API Version",
      "required": true,
      "enum": [
        "use_server_version",
        "2.0",
        "2.1",
        "2.2",
        "2.3",
        "2.4",
        "2.5",
        "2.6",
        "2.7",
        "2.8",
        "3.0",
        "3.1",
        "3.2",
        "3.3",
        "3.4",
        "3.5",
        "3.6",
        "3.7",
        "3.8",
        "3.9",
        "3.10",
        "3.11",
        "3.12",
        "3.13",
        "3.14",
        "3.15",
        "3.16",
        "3.17",
        "3.18",
        "3.19"
      ],
      "options": {
        "enum_titles": [
          "Use Server Version",
          "8.3 - 9.1",
          "9.2",
          "9.3",
          "10.0",
          "10.1",
          "10.2",
          "10.3",
          "10.4",
          "10.5",
          "2018.1",
          "2018.2",
          "2018.3",
          "2019.1",
          "2019.2",
          "2019.3",
          "2019.4",
          "2020.1",
          "2020.2",
          "2020.3",
          "2020.4",
          "2021.1",
          "2021.2",
          "2021.3",
          "2021.4",
          "2022.1",
          "2022.2 (Tableau Cloud only)",
          "2022.3",
          "2022.4 (Tableau Cloud only)",
          "2023.1"
        ]
      },
      "default": "use_server_version",
      "propertyOrder": 1
    },
    "authentication_type": {
      "type": "string",
      "title": "Authentication Type",
      "enum": [
        "Personal Access Token"
      ],
      "enabled": false,
      "default": "Personal Access Token",
      "propertyOrder": 10
    },
    "token_name": {
      "type": "string",
      "title": "PAT Token Name",
      "propertyOrder": 100,
      "options": {
        "dependencies": {
          "authentication_type": [
            "Personal Access Token"
          ]
        }
      }
    },
    "#token_secret": {
      "type": "string",
      "title": "PAT Token Secret",
      "format": "password",
      "propertyOrder": 200,
      "options": {
        "dependencies": {
          "authentication_type": [
            "Personal Access Token"
          ]
        }
      }
    },
    "endpoint": {
      "type": "string",
      "title": "Tableau server API endpoint URL",
      "description": "Just the domain part from the URL, e.g. https://dub01.online.tableau.com",
      "propertyOrder": 250
    },
    "site_id": {
      "type": "string",
      "title": "Tableau Site ID. Use with online version",
      "description": "The Site ID can be found in the URL: https://dub01.online.tableau.com/#/site/SITE_ID/home",
      "propertyOrder": 255
    },
    "poll_mode": {
      "type": "number",
      "title": "Poll mode",
      "description": "If set to `Yes` the trigger will wait for all triggered jobs to finish, otherwise it will trigger all the jobs and finish successfully right after.",
      "propertyOrder": 455,
      "enum": [
        0,
        1
      ],
      "default": 0,
      "options": {
        "enum_titles": [
          "No",
          "Yes"
        ]
      }
    },
    "datasources": {
      "type": "array",
      "title": "Tableau datasources",
      "description": "List of datasources with extracts to trigger. Note that there must be appropriate tasks/schedules set for all these sources otherwise the execution will fail",
      "items": {
        "format": "grid",
        "type": "object",
        "title": "Extract",
        "required": [
          "name",
          "tag",
          "luid",
          "type"
        ],
        "properties": {
          "name": {
            "type": "string",
            "title": "Data source name.",
            "description": "<b>Required</b> Data source name as found in Tableau.",
            "propertyOrder": 1000
          },
          "tag": {
            "type": "string",
            "title": "Data source tag.",
            "description": "Optional data source tag as found in Tableau.",
            "propertyOrder": 2000
          },
          "luid": {
            "type": "string",
            "title": "Tableu server unique LUID of the datasource (as represented via API)",
            "description": "Optional unique datasource identifier i.e. xx12-3324-1323, available via API. This ensures unique identification of the datasource. If specified, the 'tag' parameter is ignored. Fill this in after the first execution. The LUID will be printed in the component job log.",
            "propertyOrder": 3000
          },
          "type": {
            "enum": [
              "RefreshExtractTask",
              "IncrementExtractTask"
            ],
            "options": {
              "enum_titles": [
                "Full",
                "Incremental"
              ]
            },
            "type": "string",
            "title": "Refresh type",
            "description": "Extract refresh type",
            "default": "Full",
            "propertyOrder": 4000
          }
        }
      }
    }
  }
}
